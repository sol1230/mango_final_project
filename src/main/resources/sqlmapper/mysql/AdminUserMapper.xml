<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="AdminUser">
<!-- ADMIN USER LIST -->
    <!-- AdminUser.selectUserList -->
    <select id="selectUserList" parameterType="Map" resultType="Map">
        SELECT *
        FROM USER
        <if test="pageScale != null">
            ORDER BY USER_UID
            <!-- 첫번째 리스트 -->
            LIMIT #{pageBegin}, #{pageScale}
        </if>
    </select>

    <!-- AdminUser.selectUserUID
    <select id="selectUserUID" parameterType="Map" resultType="Map">
        SELECT *
        FROM USER
        WHERE USER_UID = #{USER_UID}
    </select> -->

    <!-- AdminUser.serachKeyword -->
    <select id="serachKeyword" parameterType="Map" resultType="Map">
        SELECT *
        FROM USER
        <choose>
        <when test="keyType !=null and keyType.equals('USER_ID')">
            WHERE USER_UID LIKE CONCAT('%', #{USER_UID}, '%')
        </when>
        <when test="keyType !=null and keyType.equals('NAME')">
            AND NAME LIKE CONCAT('%', #{NAME}, '%')
        </when>
        <when test="keyType !=null and keyType.equals('BIRTH_DATE')">
            AND BIRTH_DATE LIKE CONCAT('%', #{BIRTH_DATE}, '%')
        </when>
        <when test="keyType !=null and keyType.equals('PHONE')">
            AND PHONE LIKE CONCAT('%', #{PHONE}, '%')
        </when>
        </choose>
    </select>

    <!-- AdminUser.selectUserTotal -->
    <select id="selectUserTotal" parameterType="Map" resultType="int">
        SELECT count(*) as cnt
        FROM USER
    </select>

    <!-- AdminUser.insertUser -->
    <insert id="insertUser" parameterType="Map">
        INSERT INTO USER (USER_UID, PASSWORD, NAME, BIRTH, GENDER, PHONE, AUTHORITY)
        VALUES (#{USER_UID}, #{PASSWORD}, #{NAME}, #{BIRTH}, #{GENDER}, #{PHONE}, #{AUTHORITY})
    </insert>

    <!-- AdminUser.selectUserInfo -->
    <select id="selectUserInfo" parameterType="Map" resultType="Map">
        SELECT *
        FROM USER
        WHERE USER_UID = #{USER_UID}
        AND PASSWORD = #{PASSWORD}
        AND NAME = #{NAME}
        AND BIRTH = #{BIRTH}
        AND GENDER = #{GENDER}
        AND PHONE = #{PHONE}
        AND AUTHORITY = #{AUTHORITY}
    </select>

    <!-- AdminUser.updateUser  -->
    <update id="updateUser" parameterType="Map">
        UPDATE USER 
        SET PASSWORD = #{PASSWORD},
            NAME = #{NAME},
            BIRTH = #{BIRTH},
            GENDER = #{GENDER},
            PHONE = #{PHONE},
            AUTHORITY = #{AUTHORITY}
        WHERE USER_UID = #{USER_UID}
    </update>

    <!-- AdminUser.deleteUser -->
    <delete id="deleteUser" parameterType="Map">
        DELETE FROM USER
        WHERE USER_UID = #{USER_UID}
    </delete>

</mapper>